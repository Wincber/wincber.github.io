<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
    
    <entry>
      <title><![CDATA[ViewPager 嵌套 ViewPager（ViewPager不能显示，滑动冲突等问题）]]></title>
      <url>http://wincber.com/2016/09/07/ViewPage-%E5%B5%8C%E5%A5%97-ViewPage/</url>
      <content type="html"><![CDATA[<p>这两天才把ViewPager了解学习了一下，也来填一下这个坑（也熟悉一下markdown语法）<br>就不多介绍概念之类的，之说一说我所遇到的坑和给大家的建议</p>
<h2 id="ViewPager"><a href="#ViewPager" class="headerlink" title="ViewPager"></a>ViewPager</h2><p>ViewPager 感觉就不用再详细介绍了，去网上查的话可以查到一大堆介绍什么的。我也是刚接触，不过确实很多地方都用到，比如微信啊，uc浏览器啊，感觉基本上用Tab的地方基本都会用到viewpager设置一些滑动效果之类的。还有最近看到material design 好好看啊，也是许多demo都用到ViewPager</p>
<p>还是放个官方链接吧，最标准的<br><a href="https://developer.android.com/reference/android/support/v4/view/ViewPager.html" target="_blank" rel="external">官方viewpager文档</a></p>
<h2 id="ViewPager嵌套"><a href="#ViewPager嵌套" class="headerlink" title="ViewPager嵌套"></a>ViewPager嵌套</h2><p>写ViewPager 主要也是为了更加熟练地用ViewPager，但是光是ViewePager是很简单的，看官方的那个demo就知道了，有一点要说，大家用ViewPager的时候一般都是两种写法，一种就是写普通的PagerAdapter，比如一个简单的PagerAdapter<br><a id="more"></a></p>
<h3 id="PagerAdapter"><a href="#PagerAdapter" class="headerlink" title="PagerAdapter"></a>PagerAdapter</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">class MyPageAdapter extends PagerAdapter &#123;</div><div class="line"></div><div class="line">		@Override</div><div class="line">		public int <span class="function"><span class="title">getCount</span></span>() &#123;</div><div class="line">			<span class="built_in">return</span> list.size();</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		@Override</div><div class="line">		public boolean isViewFromObject(View arg0, Object arg1) &#123;</div><div class="line">			<span class="built_in">return</span> arg0 == arg1;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		@Override</div><div class="line">		public Object instantiateItem(ViewGroup container, int position) &#123;</div><div class="line">			container.addView(list.get(position));</div><div class="line">			<span class="built_in">return</span> list.get(position);</div><div class="line"></div><div class="line">		&#125;</div><div class="line"></div><div class="line">		@Override</div><div class="line">		public void destroyItem(ViewGroup container, int position, Object object) &#123;</div><div class="line">			container.removeView(list.get(position));</div><div class="line">		&#125;</div><div class="line"></div><div class="line">	&#125;</div></pre></td></tr></table></figure>
<p>这四个方法是你必须要重写的</p>
<p><em>instantiateItem(ViewGroup, int)</em>  是你进行页面操作的函数<br><em>destroyItem(ViewGroup, int, Object)</em>  负责销毁你的页面<br><em>getCount()</em> 你的页面数量<br><em>isViewFromObject(View, Object)</em> 判断当前的页面是否展示<br>具体每个方法或者说这个adapter详细的解析可以看看其他大神的文章<br>比如 <a href="http://blog.csdn.net/dmk877/article/details/50060745" target="_blank" rel="external">http://blog.csdn.net/dmk877/article/details/50060745</a> </p>
<p>而另一种则是官方比较推荐的，适配器用FragmentPagerAdapter来写，官方demo就是用的FragmentPagerAdapter写的，所以我在填坑中用的也是这种</p>
<p>怎么写就不单独说了，可以看我写的，或者看官网或者其他人的。</p>
<h2 id="遇到的坑"><a href="#遇到的坑" class="headerlink" title="遇到的坑"></a>遇到的坑</h2><p>其实只要你会用一个ViewPager 后，嵌套一个的话也就是在你的外层ViewPager的页面里加一个ViewPager控件，再在你的外层适配器所用到的Fragment中对这个ViewPager进行适配器设置之类的事件<br>大概就像这样<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">public class MyViewPagerFragment extends Fragment &#123;</div><div class="line">    @Override</div><div class="line">    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) &#123;</div><div class="line">        View view = inflater.inflate(R.layout.fragment_object,container,<span class="literal">false</span>);</div><div class="line">        ImageView images = (ImageView)view.findViewById(R.id.image_iv);</div><div class="line">        images.setImageDrawable(getResources().getDrawable(getArguments().getInt(<span class="string">"pager"</span>)));</div><div class="line">        NestingViewPager nestPager = (NestingViewPager)view.findViewById(R.id.nesting_vp);</div><div class="line">        nestPager.setAdapter(new NestingViewPagerAdapter(getChildFragmentManager()));</div><div class="line">        <span class="built_in">return</span> view;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>内层ViewPager的适配器和Fragment再单独写<br>那么遇到的问题有哪些？</p>
<h3 id="内层ViewPager不显示"><a href="#内层ViewPager不显示" class="headerlink" title="内层ViewPager不显示"></a>内层ViewPager不显示</h3><p>因为我的外层ViewPager的布局是<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">&lt;LinearLayout xmlns:android=<span class="string">"http://schemas.android.com/apk/res/android"</span></div><div class="line">    android:orientation=<span class="string">"vertical"</span> </div><div class="line">    android:layout_width=<span class="string">"match_parent"</span></div><div class="line">    android:layout_height=<span class="string">"match_parent"</span> &gt;</div><div class="line">    &lt;ScrollView</div><div class="line">        android:layout_width=<span class="string">"match_parent"</span></div><div class="line">        android:layout_height=<span class="string">"wrap_content"</span>&gt;</div><div class="line">    &lt;LinearLayout</div><div class="line">        android:layout_width=<span class="string">"match_parent"</span></div><div class="line">        android:layout_height=<span class="string">"wrap_content"</span></div><div class="line">        android:orientation=<span class="string">"vertical"</span>&gt;</div><div class="line">    &lt;ImageView</div><div class="line">        android:layout_width=<span class="string">"match_parent"</span></div><div class="line">        android:layout_height=<span class="string">"wrap_content"</span></div><div class="line">        android:id=<span class="string">"@+id/image_iv"</span></div><div class="line">        android:src=<span class="string">"@drawable/icon1"</span></div><div class="line">        android:layout_gravity=<span class="string">"center_horizontal"</span>/&gt;</div><div class="line">    &lt;com.example.wincber.viewpagetest.NestingViewPager</div><div class="line">            android:layout_width=<span class="string">"match_parent"</span></div><div class="line">            android:layout_height=<span class="string">"match_parent"</span></div><div class="line">            android:id=<span class="string">"@+id/nesting_vp"</span>&gt;</div><div class="line">    &lt;/com.example.wincber.viewpagetest.NestingViewPager&gt;</div><div class="line">    &lt;/LinearLayout&gt;</div><div class="line">    &lt;/ScrollView&gt;</div><div class="line">&lt;/LinearLayout&gt;</div></pre></td></tr></table></figure></p>
<p>运行后只显示ImageView不显示我的内层ViewPager所以我查阅了很多资料，大概主要有这两点</p>
<h4 id="getChildFragmentManager"><a href="#getChildFragmentManager" class="headerlink" title="getChildFragmentManager()"></a>getChildFragmentManager()</h4><p>内层ViewPager的Adapter（FragmentAdapter）再创建时调用的是<em>getChildFragmentManager()</em><br>当然外层的则调用的是<em>getSupportFragmentManager()</em></p>
<h4 id="ScrollView所嵌套的ViewPager中的Height进行具体的高度设置"><a href="#ScrollView所嵌套的ViewPager中的Height进行具体的高度设置" class="headerlink" title="ScrollView所嵌套的ViewPager中的Height进行具体的高度设置"></a>ScrollView所嵌套的ViewPager中的Height进行具体的高度设置</h4><p>我开始不用ScrollView不能显示完整的View，当然内层的ViewPager也显示不出来，对内层的ViewPager的高度进行设置是最简单直接的方法，缺点就是固定数值的限制<br>当然还有更科学严谨的办法，大家可以看看这篇，作者提供了三种方法<br><a href="http://hellsam.com/2015/01/29/Android%E7%9A%84%E5%9D%91%E4%B9%8BScrollView%E5%B5%8C%E5%A5%97ViewPager/" target="_blank" rel="external">ScrollView里面嵌套ViewPager之后ViewPager中的内容无法显示</a></p>
<p>我遇到的无法显示的问题就是这么解决的啦</p>
<h3 id="滑动问题"><a href="#滑动问题" class="headerlink" title="滑动问题"></a>滑动问题</h3><p>关于滑动问题（内外冲突，内层划置最边上（像第一个页面右划，向最后一个页面左划））我是通过重写onTouchEvent(MotionEvent arg0)来解决（自己写内层ViewPager）<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">public boolean onTouchEvent(MotionEvent arg0) &#123;</div><div class="line">      curF.x = arg0.getX();</div><div class="line">      curF.y = arg0.getY();</div><div class="line"></div><div class="line">      <span class="keyword">if</span>(arg0.getAction() == MotionEvent.ACTION_DOWN) &#123;</div><div class="line">          downF.x = arg0.getX();</div><div class="line">          downF.y = arg0.getY();</div><div class="line">          getParent().requestDisallowInterceptTouchEvent(<span class="literal">true</span>);</div><div class="line">      &#125;</div><div class="line">      <span class="keyword">if</span>(arg0.getAction() == MotionEvent.ACTION_MOVE) &#123;</div><div class="line">          curF.x =arg0.getX();</div><div class="line">          curF.y=arg0.getY();</div><div class="line">          <span class="keyword">if</span>(Math.abs(curF.x-downF.x) &gt; Math.abs(curF.y - downF.y)) &#123;</div><div class="line">              <span class="keyword">if</span>(curF.x &gt; downF.x) &#123; //右划</div><div class="line">                  <span class="keyword">if</span> (getCurrentItem() == 0) &#123;//第一个页面，需要父控件拦截</div><div class="line">                      getParent().requestDisallowInterceptTouchEvent(<span class="literal">false</span>);</div><div class="line">                  &#125;</div><div class="line">              &#125; <span class="keyword">else</span> &#123;//左划</div><div class="line">                  <span class="keyword">if</span> (getCurrentItem() == getAdapter().getCount() - 1) &#123;//最后一个页面，需要拦截</div><div class="line">                      getParent().requestDisallowInterceptTouchEvent(<span class="literal">false</span>);</div><div class="line">                  &#125;</div><div class="line">              &#125;</div><div class="line">          &#125;<span class="keyword">else</span> &#123;//上下划，需要拦截</div><div class="line">              getParent().requestDisallowInterceptTouchEvent(<span class="literal">false</span>);</div><div class="line">          &#125;</div><div class="line">      &#125;</div><div class="line">      <span class="built_in">return</span> super.onTouchEvent(arg0);</div><div class="line">  &#125;</div></pre></td></tr></table></figure></p>
<p>注释也说的很明白了，你肯定能看明白。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>ViewPager已经是被用到很多地方的控件了，掌握它还是蛮重要的，通过对其的练习了解到了很多。<br>文章中一些名词或者概念讲的不对或者不清楚的请提出，水平有限，想研究关于ViewPager更深层的问题还是看文档或者大神的文章吧。</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[categories test]]></title>
      <url>http://wincber.com/2016/09/05/categories-test/</url>
      <content type="html"></content>
    </entry>
    
    <entry>
      <title><![CDATA[hello blog]]></title>
      <url>http://wincber.com/2016/09/03/hello-blog/</url>
      <content type="html"><![CDATA[<p>It’s my first test about Blog,hope that I can get more .</p>
<h2 id="It’s-A-title"><a href="#It’s-A-title" class="headerlink" title="It’s A title"></a>It’s A title</h2>]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Hello Blog]]></title>
      <url>http://wincber.com/2016/09/02/hello-world/</url>
      <content type="html"><![CDATA[<p>Welcome to my Blog !今天起开始好好的在这里写一些自己在学习过程中遇到的一些我所认为的重要的东西<br><a id="more"></a></p>
<h2 id="为什么要开博客"><a href="#为什么要开博客" class="headerlink" title="为什么要开博客"></a>为什么要开博客</h2><h3 id="激励自己"><a href="#激励自己" class="headerlink" title="激励自己"></a>激励自己</h3><p>虽然在csdn之类的也写了一些自己学习过程中遇到的问题，但我感觉这个要能更加正式，督促自己能更好的写东西，这里也尽量写一些实用的东西，向那些小问题就尽量避免<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Come on</div></pre></td></tr></table></figure></p>
<h3 id="赶上潮流"><a href="#赶上潮流" class="headerlink" title="赶上潮流"></a>赶上潮流</h3><p>之前就看过很厉害的学长的博客，而最近群里的一些小伙伴也好像都有这方面的意向，我也就赶个热</p>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="装逼"><a href="#装逼" class="headerlink" title="装逼"></a>装逼</h3><p>这是我的网站，想想还有点小激动</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">It<span class="string">'s my Website</span></div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
  
  
</search>
